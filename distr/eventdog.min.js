/**
 * EventDog v1.2
 * (c) 2015 Cubeline agency. http://www.cubeline.ru/
 * author: Philipp Sirotkin. sirotkin@cubeline.ru
 * License: MIT
 */
eventdog=function(){var a=$.fn.on,b=EventTarget.prototype.addEventListener;$.fn.on=function(){return a.apply(this,arguments).trigger("addEvent")},EventTarget.prototype.addEventListener=function(a,c,d){this.origEvent=b,this.origEvent(a,c,d),$(this).trigger("addEvent")},String.prototype.unicodeToChar=function(){return this.replace(/\\u[\dABCDEFabcdef][\dABCDEFabcdef][\dABCDEFabcdef][\dABCDEFabcdef]/g,function(a){return String.fromCharCode(parseInt(a.replace(/\\u/g,""),16))})},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.clearText=function(){return this.unicodeToChar().toLowerCase().replace(/[^a-z\u0430-\u044f0-9-!?\u0451]/g,"")};var c=function(){console.error("\u041d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0447\u0435\u0440\u0435\u0437 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 callback \u0434\u043b\u044f \u0435\u0451 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 \u0432\u044b\u0437\u043e\u0432\u0430")};return $.fn.bindFirst=function(a,b,c){var d=a.indexOf("."),e=d>0?a.substring(d):"";return a=d>0?a.substring(0,d):a,c=void 0==c?b:c,b="function"==typeof b?{}:b,this.each(function(){var d=$(this),f=this["on"+a];f&&(d.bind(a,function(a){return f(a.originalEvent)}),this["on"+a]=null),d.bind(a+e,b,c);var g=d.data("events")||$._data(d[0],"events"),h=g[a],i=h.pop();h.unshift(i)})},$.fn.bindLast=function(a,b){return this.each(function(){var c=1e6,d=a.split("."),e=d[0];$(this).on(a,b);var f=this;$(this).on("addEvent",function(){var d=$._data(f,"events"),g=!1,h={};if($.each(d[e],function(a,c){c.handler===b&&(g=a),h[a]=1}),g!==!1){for(;1==h[c];)c++;var i=d[e].length-1,j=d[e][g];d[e].splice(g,1),d[e].splice(i,0,j),$(f).data("events",d)}})})},{ajax:function(a){if(a="undefined"!==typeof a?a:{},a.callback="undefined"!==typeof a.callback?a.callback:-1,"undefined"!==typeof a.events){a.events=a.events.toLowerCase().split(" ");for(var b=0;b<a.events.length;++b)a.events[b]="ajax"+a.events[b].capitalize();a.events=a.events.toString().replace(","," ")}else a.events="ajaxSend";"undefined"!==typeof a.element&&"undefined"==typeof a.url&&(a.element=$(a.element),a.element.attr("action").length&&(a.url=a.element.attr("action"))),"undefined"!==typeof a.url?$(document).on(a.events,function(b,d,e,f){if(-1!==e.url.indexOf(a.url))if("undefined"!==typeof a.substring){if("undefined"==typeof f)return;if(-1!==f.clearText().indexOf(a.substring.clearText()))try{a.callback()}catch(g){c()}}else try{a.callback()}catch(g){c()}}):$(document).on(a.events,function(b,d,e,f){if("undefined"!==typeof a.substring){if("undefined"==typeof f)return;if(-1!==f.clearText().indexOf(a.substring.clearText()))try{a.callback()}catch(g){c()}}else try{a.callback()}catch(g){c()}})},dom:function(a){a="undefined"!==typeof a?a:{},"undefined"==typeof a.element&&(a.element=document);var b=$(a.element);"undefined"==typeof a.substring?b.on("DOMSubtreeModified keyup change",function(){try{a.callback()}catch(b){c()}}):b.on("DOMSubtreeModified change",function(){var d=null;if(d="INPUT"==b[0].tagName||"TEXTAREA"==b[0].tagName||"SELECT"==b[0].tagName?b.val():b.text(),-1!==d.clearText().indexOf(a.substring.clearText()))try{a.callback()}catch(e){c()}})},click:function(a){try{var b=$(a.element);b.bindFirst("click",a.callback)}catch(d){c()}},submit:function(a){try{var b=$(a.element);b.bindFirst("submit",a.callback)}catch(d){c()}},change:function(a){try{var b=$(a.element);b.bindLast("change",a.callback)}catch(d){c()}}}}();