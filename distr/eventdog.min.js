/**
 * EventDog v1.0
 * (c) 2015 Cubeline agency. http://www.cubeline.ru/
 * author: Philipp Sirotkin. sirotkin@cubeline.ru
 * License: MIT
 */
eventdog=function(){String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.unicodeToChar=function(){return this.replace(/\\u[\dABCDEFabcdef][\dABCDEFabcdef][\dABCDEFabcdef][\dABCDEFabcdef]/g,function(e){return String.fromCharCode(parseInt(e.replace(/\\u/g,""),16))})},String.prototype.clearText=function(){return this.unicodeToChar().toLowerCase().replace(/[^a-zа-я0-9-!?ё]/g,"")};var e=function(){console.error("Нужно указать функцию через параметр callback для её последующего вызова вызова")};return{ajax:function(t){if(t="undefined"!=typeof t?t:{},t.callback="undefined"!=typeof t.callback?t.callback:-1,"undefined"!=typeof t.events){t.events=t.events.toLowerCase().split(" ");for(var n=0;n<t.events.length;++n)t.events[n]="ajax"+t.events[n].capitalize();t.events=t.events.toString().replace(","," ")}else t.events="ajaxSend";"undefined"!=typeof t.element&&"undefined"==typeof t.url&&(t.element=$(t.element),t.element.attr("action").length&&(t.url=t.element.attr("action"))),"undefined"!=typeof t.url?$(document).on(t.events,function(n,a,c,r){if(-1!==c.url.indexOf(t.url))if("undefined"!=typeof t.substring){if("undefined"==typeof r)return;if(-1!==r.clearText().indexOf(t.substring.clearText()))try{t.callback()}catch(i){e()}}else try{t.callback()}catch(i){e()}}):$(document).on(t.events,function(n,a,c,r){if("undefined"!=typeof t.substring){if("undefined"==typeof r)return;if(-1!==r.clearText().indexOf(t.substring.clearText()))try{t.callback()}catch(i){e()}}else try{t.callback()}catch(i){e()}})},dom:function(t){t="undefined"!=typeof t?t:{},"undefined"==typeof t.element&&(t.element=document);var n=$(t.element);"undefined"==typeof t.substring?n.on("DOMSubtreeModified keyup change",function(){try{t.callback()}catch(n){e()}}):n.on("DOMSubtreeModified change",function(){var a=null;if(a="INPUT"==n[0].tagName||"TEXTAREA"==n[0].tagName?n.val():n.text(),-1!==a.clearText().indexOf(t.substring.clearText()))try{t.callback()}catch(c){e()}})}}}();